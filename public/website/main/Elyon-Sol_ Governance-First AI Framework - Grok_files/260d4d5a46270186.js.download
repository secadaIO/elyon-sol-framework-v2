(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,310158,e=>{"use strict";e.s(["ImageEditorQueryBar",()=>p]);var t=e.i(498693),i=e.i(246429);e.i(685846);var a=e.i(560831),s=e.i(389),r=e.i(211959),n=e.i(159422),l=e.i(555309),o=e.i(633918),d=e.i(346306);e.i(18545);var c=e.i(116212),u=e.i(654917);let p=e=>{let{className:p,hasImage:g,inputValue:m,isStreaming:h,onInputValueChange:f,onSend:y,onAbort:v}=e,{t:b}=(0,c.useTranslation)("base"),x=(0,i.useChatPageStore)(o.prop("lastMessageId")),k=(0,i.useChatPageStore)(o.prop("streamedMessageId")),I=(0,n.useResponseStore)(o.prop("byId")),j=(0,d.useRef)(null),S=(0,d.useRef)(null),[w,_]=(0,d.useState)(!1),C=(0,d.useMemo)(()=>h||!g,[h,g]),M=(0,d.useMemo)(()=>!w&&!h&&g&&!!m.trim(),[w,g,m,h]),E=(0,d.useCallback)(async e=>{var t;e.preventDefault(),!C&&m.trim()&&(_(!0),await (null==(t=y(m))?void 0:t.finally(()=>{var e;null==(e=S.current)||e.focus(),_(!1)})))},[y,C,m]),N=(0,d.useMemo)(()=>{let e=k?I[k]:void 0;if((null==e?void 0:e.parentResponseId)===x)return e},[k,I,x]),P=(0,d.useMemo)(()=>{if(h)return(null==N?void 0:N.state)||"closed"},[h,N]),T=(0,d.useCallback)(e=>{if(e.stopPropagation(),"Enter"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.nativeEvent.isComposing){var t;e.preventDefault(),null==(t=j.current)||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},[]);return(0,t.jsxs)("form",{className:(0,r.cn)("w-full rounded-[32px] p-3 bg-input-background shadow shadow-input-border/10 flex gap-2 pl-5 items-end ring-1 ring-input-border ring-inset",p),onSubmit:E,ref:j,children:[(0,t.jsx)(u.default,{ref:S,className:(0,r.cn)("w-full @[480px]/input:px-3 bg-transparent focus:outline-none text-primary align-bottom resize-none pb-1.5",h&&"animate-pulse"),onChange:e=>f(e.target.value),value:m,placeholder:g?h?b("Editing image","Editing image"):b("Describe your edits","Describe your edits"):b("Upload an image to begin","Upload an image to begin"),minRows:1,onKeyDown:T,autoFocus:!0,disabled:C,name:"query",maxRows:5}),(0,t.jsx)("div",{className:(0,r.cn)("ms-auto flex flex-row items-end gap-1"),children:h&&("streaming"===P||"reconnecting"===P)?(0,t.jsx)(l.motion.button,{whileTap:{scale:.95},initial:{scale:.95,opacity:1},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:.5,transition:{duration:.2}},className:(0,r.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),onClick:e=>{e.preventDefault(),v().catch(console.error)},children:(0,t.jsx)("div",{className:(0,r.cn)("h-9","aspect-square flex flex-col items-center justify-center rounded-full","rounded-full ring-1 ring-inset","bg-primary text-background ring-button-outline-border"),children:(0,t.jsx)(s.Square,{size:20})})}):(0,t.jsx)(l.motion.button,{initial:{opacity:.5},animate:{opacity:1,transition:{duration:.1}},whileHover:g?{scale:1.1}:void 0,whileTap:g?{scale:.95}:void 0,className:(0,r.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),type:"submit","aria-label":b("Submit","Submit"),disabled:!M,children:(0,t.jsx)("div",{className:(0,r.cn)("h-9 relative","aspect-square flex flex-col items-center justify-center","rounded-full ring-1 ring-inset duration-100","before:absolute before:inset-0 before:rounded-full before:bg-primary before:ring-0 before:transition-all duration-500",M?"bg-primary text-background ring-transparent before: before:[clip-path:circle(50%_at_50%_50%)]":"bg-button-secondary text-secondary before:[clip-path:circle(0%_at_50%_50%)] ring-0"),children:(0,t.jsx)(a.ArrowUpIcon,{size:20,className:"relative"})})})})]})}},389,e=>{"use strict";e.s(["Square",()=>t],389);let t=(0,e.i(111041).default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},110098,e=>{"use strict";e.s(["Upload",()=>t],110098);let t=(0,e.i(111041).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},738767,e=>{"use strict";e.s(["Bot",()=>t],738767);let t=(0,e.i(111041).default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},101126,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(111041).default)("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]])},889963,123018,e=>{"use strict";e.s(["useEditImagePresets",()=>B],889963);var t=e.i(498693);e.i(685846);var i=e.i(738767);e.s(["Brush",()=>a.default],123018);var a=e.i(101126),a=a,s=e.i(479410),r=e.i(111041);let n=(0,r.default)("Castle",[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]]);var l=e.i(956467);let o=(0,r.default)("CircuitBoard",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M11 9h4a2 2 0 0 0 2-2V3",key:"1ve2rv"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"M7 21v-4a2 2 0 0 1 2-2h4",key:"1fwkro"}],["circle",{cx:"15",cy:"15",r:"2",key:"3i40o0"}]]);var d=e.i(66662),c=e.i(797088),u=e.i(50900),u=u,p=e.i(700847);let g=(0,r.default)("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),m=(0,r.default)("Gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);var h=e.i(554560),f=e.i(354391);let y=(0,r.default)("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]),v=(0,r.default)("Joystick",[["path",{d:"M21 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2Z",key:"jg2n2t"}],["path",{d:"M6 15v-2",key:"gd6mvg"}],["path",{d:"M12 15V9",key:"8c7uyn"}],["circle",{cx:"12",cy:"6",r:"3",key:"1gm2ql"}]]),b=(0,r.default)("MountainSnow",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}],["path",{d:"M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19",key:"1pvmmp"}]]),x=(0,r.default)("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]);var k=e.i(847675),I=e.i(988563);let j=(0,r.default)("Radiation",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7.5 4.2c-.3-.5-.9-.7-1.3-.4C3.9 5.5 2.3 8.1 2 11c-.1.5.4 1 1 1h5c0-1.5.8-2.8 2-3.4-1.1-1.9-2-3.5-2.5-4.4z",key:"wy49g3"}],["path",{d:"M21 12c.6 0 1-.4 1-1-.3-2.9-1.8-5.5-4.1-7.1-.4-.3-1.1-.2-1.3.3-.6.9-1.5 2.5-2.6 4.3 1.2.7 2 2 2 3.5h5z",key:"vklnvr"}],["path",{d:"M7.5 19.8c-.3.5-.1 1.1.4 1.3 2.6 1.2 5.6 1.2 8.2 0 .5-.2.7-.8.4-1.3-.5-.9-1.4-2.5-2.5-4.3-1.2.7-2.8.7-4 0-1.1 1.8-2 3.4-2.5 4.3z",key:"wkdf1o"}]]);var S=e.i(446836);let w=(0,r.default)("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);var _=e.i(585910);let C=(0,r.default)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);var M=e.i(62519);let E=(0,r.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),N=(0,r.default)("SprayCan",[["path",{d:"M3 3h.01",key:"159qn6"}],["path",{d:"M7 5h.01",key:"1hq22a"}],["path",{d:"M11 7h.01",key:"1osv80"}],["path",{d:"M3 7h.01",key:"1xzrh3"}],["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{width:"4",height:"4",x:"15",y:"5",key:"mri9e4"}],["path",{d:"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2",key:"aib6hk"}],["path",{d:"m13 14 8-2",key:"1d7bmk"}],["path",{d:"m13 19 8-2",key:"1y2vml"}]]);var P=e.i(389);let T=(0,r.default)("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]),U=(0,r.default)("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]),R=(0,r.default)("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),L=(0,r.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),A=(0,r.default)("VenetianMask",[["path",{d:"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z",key:"1g6z3j"}],["path",{d:"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z",key:"c2lwnf"}],["path",{d:"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z",key:"njd9zo"}]]);var z=e.i(36975),D=e.i(346306);e.i(18545);var F=e.i(910901),O=e.i(50636);function B(){let e=(0,O.useFeatureFlags)();return(0,D.useMemo)(()=>{var t,i;let a=Array.isArray(null==(i=e.EDIT_IMAGE_PRESETS)||null==(t=i.value)?void 0:t.presets)?e.EDIT_IMAGE_PRESETS.value.presets:[];return{editImagePresets:K.map(e=>({...e,label:e.label,presets:e.presets.map(e=>{var t,i;return{...e,prompt:null!=(i=null==(t=a.find(t=>t.presetId===e.presetId))?void 0:t.prompt)?i:""}})})).filter(e=>e.presets.some(e=>e.prompt)).map(e=>({...e,presets:e.presets.filter(e=>e.prompt)}))}},[e])}let K=[{category:"creative",icon:k.Paintbrush,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.creative",defaults:"Creative"}),presets:[{presetId:"water-color",icon:c.Droplet,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.water-color",defaults:"Watercolor"}),previewUrl:"/image-editing-preset-previews/water-color.jpg"},{presetId:"15th-century",icon:n,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.15th-century",defaults:"15th Century"}),previewUrl:"/image-editing-preset-previews/15th-century.jpg"},{presetId:"graffiti",icon:N,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.graffiti",defaults:"Graffiti"}),previewUrl:"/image-editing-preset-previews/graffiti.jpg"},{presetId:"renaissance-painting",icon:I.Palette,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.renaissance-painting",defaults:"Renaissance Painting"}),previewUrl:"/image-editing-preset-previews/renaissance-painting.jpg"},{presetId:"symbolist-painting",icon:u.default,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.symbolist-painting",defaults:"Symbolist Painting"}),previewUrl:"/image-editing-preset-previews/symbolist-painting.jpg"},{presetId:"expressionist-painting",icon:a.default,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.expressionist-painting",defaults:"Expressionist Painting"}),previewUrl:"/image-editing-preset-previews/expressionist-painting.jpg"},{presetId:"cubist-painting",icon:P.Square,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cubist-painting",defaults:"Cubist Painting"}),previewUrl:"/image-editing-preset-previews/cubist-painting.jpg"},{presetId:"ukiyo-e-painting",icon:l.Cherry,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.ukiyo-e-painting",defaults:"Ukiyo-e Painting"}),previewUrl:"/image-editing-preset-previews/ukiyo-e-painting.jpg"},{presetId:"bright-anime",icon:M.Smile,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.bright-anime",defaults:"Bright Anime"}),previewUrl:"/image-editing-preset-previews/bright-anime.jpg"},{presetId:"dark-anime",icon:C,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.dark-anime",defaults:"Dark Anime"}),previewUrl:"/image-editing-preset-previews/dark-anime.jpg"},{presetId:"cyberpunk",icon:o,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cyberpunk",defaults:"Cyberpunk"}),previewUrl:"/image-editing-preset-previews/cyberpunk.jpg"},{presetId:"retro-game",icon:m,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.retro-game",defaults:"Retro Game"}),previewUrl:"/image-editing-preset-previews/retro-game.jpg"}]},{category:"background",icon:b,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.background",defaults:"Background"}),presets:[{presetId:"paris",icon:s.Building2,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.paris",defaults:"Paris"}),previewUrl:"/image-editing-preset-previews/paris.jpg"},{presetId:"london",icon:s.Building2,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.london",defaults:"London"}),previewUrl:"/image-editing-preset-previews/london.jpg"},{presetId:"tokyo",icon:s.Building2,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.tokyo",defaults:"Tokyo"}),previewUrl:"/image-editing-preset-previews/tokyo.jpg"},{presetId:"mars",icon:x,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mars",defaults:"Mars"}),previewUrl:"/image-editing-preset-previews/mars.jpg"},{presetId:"tropical-paradise",icon:U,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.tropical-paradise",defaults:"Tropical Paradise"}),previewUrl:"/image-editing-preset-previews/tropical-paradise.jpg"},{presetId:"cosmic-void",icon:E,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cosmic-void",defaults:"Cosmic Void"}),previewUrl:"/image-editing-preset-previews/cosmic-void.jpg"},{presetId:"urban-rooftop",icon:s.Building2,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.urban-rooftop",defaults:"Urban Rooftop"}),previewUrl:"/image-editing-preset-previews/urban-rooftop.jpg"},{presetId:"enchanted-cave",icon:h.Gem,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.enchanted-cave",defaults:"Enchanted Cave"}),previewUrl:"/image-editing-preset-previews/enchanted-cave.jpg"},{presetId:"misty-forest",icon:R,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.misty-forest",defaults:"Misty Forest"}),previewUrl:"/image-editing-preset-previews/misty-forest.jpg"},{presetId:"retro-arcade",icon:v,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.retro-arcade",defaults:"Retro Arcade"}),previewUrl:"/image-editing-preset-previews/retro-arcade.jpg"},{presetId:"space-station",icon:S.Rocket,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.space-station",defaults:"Space Station"}),previewUrl:"/image-editing-preset-previews/space-station.jpg"},{presetId:"desert-oasis",icon:U,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.desert-oasis",defaults:"Desert Oasis"}),previewUrl:"/image-editing-preset-previews/desert-oasis.jpg"},{presetId:"volcano-lair",icon:p.Flame,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.volcano-lair",defaults:"Volcano Lair"}),previewUrl:"/image-editing-preset-previews/volcano-lair.jpg"},{presetId:"post-apocalypse",icon:j,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.post-apocalypse",defaults:"Post-Apocalypse"}),previewUrl:"/image-editing-preset-previews/post-apocalypse.jpg"}]},{category:"subject",icon:g,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.subject",defaults:"Subject"}),presets:[{presetId:"stylish-hat",icon:y,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.stylish-hat",defaults:"Stylish Hat"}),previewUrl:"/image-editing-preset-previews/stylish-hat.jpg"},{presetId:"mustache",icon:A,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mustache",defaults:"Mustache"}),previewUrl:"/image-editing-preset-previews/mustache.jpg"},{presetId:"superhero-costume",icon:z.Zap,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.superhero-costume",defaults:"Superhero Costume"}),previewUrl:"/image-editing-preset-previews/superhero-costume.jpg"},{presetId:"golden-glow",icon:T,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.golden-glow",defaults:"Golden Glow"}),previewUrl:"/image-editing-preset-previews/golden-glow.jpg"},{presetId:"mecha-warrior",icon:i.Bot,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mecha-warrior",defaults:"Mecha Warrior"}),previewUrl:"/image-editing-preset-previews/mecha-warrior.jpg"},{presetId:"sunglasses-jacket",icon:f.Glasses,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.sunglasses-jacket",defaults:"Sunglasses & Jacket"}),previewUrl:"/image-editing-preset-previews/sunglasses-jacket.jpg"},{presetId:"medieval-armor",icon:_.Shield,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.medieval-armor",defaults:"Medieval Armor"}),previewUrl:"/image-editing-preset-previews/medieval-armor.jpg"},{presetId:"time-traveler",icon:d.Clock,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.time-traveler",defaults:"Time Traveler"}),previewUrl:"/image-editing-preset-previews/time-traveler.jpg"},{presetId:"hologram-effect",icon:w,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.hologram-effect",defaults:"Hologram Effect"}),previewUrl:"/image-editing-preset-previews/hologram-effect.jpg"},{presetId:"dragon-rider",icon:p.Flame,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.dragon-rider",defaults:"Dragon Rider"}),previewUrl:"/image-editing-preset-previews/dragon-rider.jpg"},{presetId:"remove-people",icon:L,label:(0,t.jsx)(F.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.remove-people",defaults:"Remove People"}),previewUrl:"/image-editing-preset-previews/remove-people.jpg"}]}]},431533,e=>{"use strict";e.s(["ImageLoader",()=>r]);var t=e.i(498693),i=e.i(211959);e.i(685846);var a=e.i(715127),s=e.i(555309);let r=e=>{let{className:r}=e;return(0,t.jsx)(s.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,i.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",r),children:(0,t.jsx)(a.ImageIcon,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")}},103142,(e,t,i)=>{},238552,(e,t,i)=>{var a=e.i(207317);e.r(103142);var s=e.r(346306),r=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s),n=void 0!==a.default&&a.default.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,i=t.name,a=void 0===i?"stylesheet":i,s=t.optimizeForSpeed,r=void 0===s?n:s;d(l(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",d("boolean"==typeof r,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=r,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,i=e.prototype;return i.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},i.isOptimizeForSpeed=function(){return this._optimizeForSpeed},i.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(n||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,i){return"number"==typeof i?e._serverSheet.cssRules[i]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),i},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},i.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},i.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},i.insertRule=function(e,t){if(d(l(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var i=this.getSheet();"number"!=typeof t&&(t=i.cssRules.length);try{i.insertRule(e,t)}catch(t){return n||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},i.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var i="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!i.cssRules[e])return e;i.deleteRule(e);try{i.insertRule(t,e)}catch(a){n||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),i.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];d(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},i.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},i.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},i.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,i){return i?t=t.concat(Array.prototype.map.call(e.getSheetForTag(i).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},i.makeStyleTag=function(e,t,i){t&&d(l(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return i?s.insertBefore(a,i):s.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return t>>>0},u={};function p(e,t){if(!t)return"jsx-"+e;var i=String(t),a=e+i;return u[a]||(u[a]="jsx-"+c(e+"-"+i)),u[a]}function g(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var i=e+t;return u[i]||(u[i]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[i]}var m=function(){function e(e){var t=void 0===e?{}:e,i=t.styleSheet,a=void 0===i?null:i,s=t.optimizeForSpeed,r=void 0!==s&&s;this._sheet=a||new o({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),a&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var i=this.getIdAndRules(e),a=i.styleId,s=i.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var r=s.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=r,this._instancesCounts[a]=1},t.remove=function(e){var t=this,i=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(i in this._instancesCounts,"styleId: `"+i+"` not found"),this._instancesCounts[i]-=1,this._instancesCounts[i]<1){var a=this._fromServer&&this._fromServer[i];a?(a.parentNode.removeChild(a),delete this._fromServer[i]):(this._indices[i].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[i]),delete this._instancesCounts[i]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],i=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return i[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,i;return t=this.cssRules(),void 0===(i=e)&&(i={}),t.map(function(e){var t=e[0],a=e[1];return r.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:i.nonce?i.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,i=e.dynamic,a=e.id;if(i){var s=p(a,i);return{styleId:s,rules:Array.isArray(t)?t.map(function(e){return g(s,e)}):[g(s,t)]}}return{styleId:p(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),h=s.createContext(null);function f(){return new m}function y(){return s.useContext(h)}h.displayName="StyleSheetContext";var v=r.default.useInsertionEffect||r.default.useLayoutEffect,b="undefined"!=typeof window?f():void 0;function x(e){var t=b||y();return t&&("undefined"==typeof window?t.add(e):v(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}x.dynamic=function(e){return e.map(function(e){return p(e[0],e[1])}).join(" ")},i.StyleRegistry=function(e){var t=e.registry,i=e.children,a=s.useContext(h),n=s.useState(function(){return a||t||f()})[0];return r.default.createElement(h.Provider,{value:n},i)},i.createStyleRegistry=f,i.style=x,i.useStyleRegistry=y},717555,(e,t,i)=>{t.exports=e.r(238552).style},31157,742590,749659,605113,171686,e=>{"use strict";e.s([],31157);var t=e.i(498693);e.i(246429),e.i(685846),e.i(333309);var i=e.i(687448);e.i(66662),e.i(297473);var a=e.i(9461);e.i(125443),e.i(847675);var s=e.i(111041);(0,s.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),e.i(446836),e.i(266542);var r=e.i(920958),n=e.i(328788);e.i(243634),e.i(667536);var l=e.i(230433),o=e.i(211959),d=e.i(735806),c=e.i(555309),u=e.i(5281),p=e.i(633918),g=e.i(346306);e.i(18545);var m=e.i(116212);e.i(916390);var h=e.i(572848),f=e.i(763578),y=e.i(587221);e.i(692249);var v=e.i(687712),b=e.i(486492);e.i(364778),e.i(298616),e.i(910503);var x=e.i(133735);e.i(180605);var k=e.i(533431),I=e.i(723008);e.s(["UpsellFlow",()=>ep],605113);var j=e.i(12465),S=e.i(913106),w=e.i(942938);e.s(["UpsellPlansV2",()=>er],749659);var _=e.i(648843),C=e.i(831413),C=C,M=e.i(531875),E=e.i(957992),E=E;let N=(0,s.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var P=e.i(979566),T=e.i(211555);let U=(0,s.default)("GlobeLock",[["path",{d:"M15.686 15A14.5 14.5 0 0 1 12 22a14.5 14.5 0 0 1 0-20 10 10 0 1 0 9.542 13",key:"qkt0x6"}],["path",{d:"M2 12h8.5",key:"ovaggd"}],["path",{d:"M20 6V4a2 2 0 1 0-4 0v2",key:"1of5e8"}],["rect",{width:"8",height:"5",x:"14",y:"6",rx:"1",key:"1fmf51"}]]),R=(0,s.default)("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);var L=e.i(351958);let A=(0,s.default)("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);e.s(["default",()=>z],742590);let z=(0,s.default)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);var D=e.i(399628);let F=(0,s.default)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var O=e.i(43491),B=e.i(793936),K=e.i(7390),G=e.i(90476),H=e.i(353824),V=e.i(934357),q=e.i(206235),W=e.i(25594),Y=e.i(715127),Z=e.i(50636),X=e.i(73978),Q=e.i(408430);e.i(690654);var J=e.i(129876),$=e.i(72290),ee=e.i(717555);function et(e){let{children:i,className:a,speed:s=.3,colorFrom:r="#d946ef",colorTo:n="#3b82f6",occasionalHighlight:l=!1,highlightInterval:d=4}=e,c=2/s;return(0,t.jsxs)("div",{style:{...l?{animation:"occasionalGradient ".concat(l?d:c,"s ease-in-out infinite")}:{backgroundImage:"linear-gradient(to right, ".concat(r,", ").concat(n,", ").concat(r,")"),backgroundSize:"200% 100%",animation:"gradient ".concat(c,"s ease-in-out infinite")}},className:ee.default.dynamic([["826796e2f576888e",[r,n,r,r,n,r,r,n,r]]])+" "+((0,o.cn)("relative inline-block",l?"text-current":"bg-gradient-to-r bg-clip-text text-transparent",a)||""),children:[i,(0,t.jsx)(ee.default,{id:"826796e2f576888e",dynamic:[r,n,r,r,n,r,r,n,r],children:"@keyframes gradient{0%,to{background-position:0%}50%{background-position:100%}}@keyframes occasionalGradient{0%,80%{background:0 0;background-clip:initial;color:inherit}85%{background:linear-gradient(to right,".concat(r,",").concat(n,",").concat(r,");color:transparent;background-position:0%;background-size:200% 100%;-webkit-background-clip:text;background-clip:text}92.5%{background:linear-gradient(to right,").concat(r,",").concat(n,",").concat(r,");color:transparent;background-position:100%;background-size:200% 100%;-webkit-background-clip:text;background-clip:text}to{background:linear-gradient(to right,").concat(r,",").concat(n,",").concat(r,");color:transparent;background-position:0%;background-size:200% 100%;-webkit-background-clip:text;background-clip:text}}")})]})}var ei=e.i(694193);function ea(){return(0,t.jsxs)(c.motion.div,{initial:{opacity:0,translateY:-150},animate:{opacity:.15,translateY:0},transition:{duration:1,ease:"easeOut"},className:"absolute -inset-x-[600px] -top-12 flex h-[400px] grow opacity-[0.15] blur-lg",style:{maskImage:"linear-gradient(to top, rgba(255, 255, 255, 0), rgb(255, 255, 255))",WebkitMaskImage:"linear-gradient(to top, rgba(255, 255, 255, 0), rgb(255, 255, 255))"},children:[(0,t.jsx)("div",{className:"grow gradient-one"}),(0,t.jsx)("div",{className:"grow gradient-two"}),(0,t.jsx)("style",{children:"\n      .gradient-one {\n        background: linear-gradient(to bottom, rgb(255, 255, 255), rgba(10, 10, 10, 0)); /* Fallback for non-conic browsers */\n        background: conic-gradient(\n          from 90deg at 35% -1%,\n          rgb(255, 255, 255) 7.2deg,\n          rgb(255, 255, 255) 14.4deg,\n          rgba(10, 10, 10, 0) 36deg,\n          rgba(10, 10, 10, 0) 342deg,\n          rgb(255, 255, 255) 360deg\n        ); /* Overrides if supported */\n      }\n      .gradient-two {\n        background: linear-gradient(to bottom, rgb(255, 255, 255), rgba(10, 10, 10, 0)); /* Fallback for non-conic browsers */\n        background: conic-gradient(\n          from -90deg at 65% -1%,\n          rgb(255, 255, 255) 0deg,\n          rgba(10, 10, 10, 0) 18deg,\n          rgba(10, 10, 10, 0) 324deg,\n          rgb(255, 255, 255) 345.6deg,\n          rgb(255, 255, 255) 352.8deg\n        ); /* Overrides if supported */\n      }\n    "})]})}var es=e.i(845285);let er=e=>{let{isSubscribed:s,isSuccessful:p}=e,{t:h}=(0,m.useTranslation)("upsell"),f=(0,Z.useFeatureFlags)(),[v,b]=(0,g.useState)(f.SUPERGROK_PAYWALL_ANNUAL_SELECTED_DEFAULT_ENABLED?"yearly":"monthly"),x=(0,d.useUpsellStore)(e=>e.upsellCategory),I=(0,r.useLogEvent)(),{currentTeam:j}=(0,J.useEnterprise)(),[S,w]=(0,g.useState)({individual:1,team:+!!j}),X=(0,n.useMobileSize)(),$=(0,u.useSearchParams)();(0,g.useEffect)(()=>{s?I("upsell_fullscreen_open_subbed","",{location:"upsell-plans",isSubscribed:"true"}):I("upsell_fullscreen_open_not_subbed","",{location:"upsell-plans",isSubscribed:"false"})},[]),(0,g.useEffect)(()=>{if(p){let e=null==$?void 0:$.get("tier"),t=null==$?void 0:$.get("interval");I("upsell_fullscreen_open_success","",{location:"upsell-plans",isSubscribed:String(s),...e&&{tier:e},...t&&{interval:t}})}},[p,$]);let{resolvedTheme:ee}=(0,Q.useTheme)(),et="dark"===ee,{bestSubscription:ei}=(0,l.useSubscriptions)(),{superGrokSubscriptionPrices:er,superGrokProSubscriptionPrices:eo,error:eu}=(0,l.useStripe)(),ep=(0,g.useRef)(!1);(0,g.useEffect)(()=>(eu&&!ep.current&&(k.toast.error(h("useStripe.fail","Failed to connect to subscription service")),ep.current=!0),()=>{ep.current=!1}),[eu,h]);let eg=(0,g.useCallback)(()=>{I("toggle_interval","",{location:"upsell-plans",previousInterval:v,newInterval:"monthly"===v?"yearly":"monthly"}),b(e=>"monthly"===e?"yearly":"monthly")},[v,I]),em=(0,g.useCallback)(()=>{let{setUpsellCategory:e}=d.useUpsellStore.getState(),t="individual"===x?"team":"individual";"team"===t&&b("monthly"),e(t)},[x]),eh=(0,g.useMemo)(()=>"team"===x?(0,t.jsxs)(c.motion.header,{initial:{opacity:0,translateY:8},animate:{opacity:1,translateY:0},transition:{duration:.4,ease:"easeOut"},className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(es.GrokBusinessLogo,{isDark:et,className:"h-[40px] mb-[8px]"}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-fg-secondary",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:h("grok-teams.tagline-first-line","Ignite collective genius")}),(0,t.jsx)("h3",{className:"text-lg font-semibold -m-1 dark:text-fg-tertiary",children:h("grok-teams.tagline-second-line","Scale intelligence across your organization")})]})]}):(0,t.jsxs)(c.motion.header,{initial:{opacity:0,translateY:8},animate:{opacity:1,translateY:0},transition:{duration:.4,ease:"easeOut"},className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(es.SuperGrokWordPlain,{isDark:et,className:"h-[48px]"}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-fg-secondary",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:f.ENABLE_GROK_4_1_UPSELLS?h("grok-upsell-plans.title-grok-4-1","Introducing Grok 4.1"):h("Introducing Grok 4","Introducing Grok 4")}),(0,t.jsx)("h3",{className:"text-lg font-semibold -m-1 dark:text-fg-tertiary",children:h("The most powerful AI model.","The most powerful AI model")})]})]}),[x,h,et,f.ENABLE_GROK_4_1_UPSELLS]),ef={title:h("Basic","Basic"),ctaLabel:h("Sign up","Sign up"),isPopular:!1,features:[{Icon:M.CircleCheckIcon,label:h("free.limited-access-chat-models","Limited access to chat models")},{Icon:i.BrainIcon,label:h("free.limited-context-memory-v2","Limited context memory")},{Icon:Y.ImageIcon,label:h("free.aurora-image-model-v2","Aurora image model")},{Icon:C.default,label:h("free.voice-with-vision","Voice access"),isHighlighted:!0},{Icon:P.FolderIcon,label:h("free.projects","Projects")},{Icon:_.AlarmCheckIcon,label:h("free.tasks","Tasks")}],monthlyPrice:"Free",yearlyPrice:"Free",planIndex:0,setSelectedPlanIndex:()=>{}},ey={title:h("supergrok.title","SuperGrok"),ctaLabel:h("supergrok.cta-label","Upgrade to SuperGrok"),isPopular:!0,features:[{Icon:M.CircleCheckIcon,label:f.ENABLE_GROK_4_1_UPSELLS?h("supergrok.increased-access-grok-4-1","Increased access to Grok 4.1"):h("supergrok.increased-access-grok-4","Increased access to Grok 4"),detail:h("supergrok.replaces-grok-3-v3","Improved reasoning and search capabilities"),isNewRowDetail:!0,isHighlighted:!0},{Icon:M.CircleCheckIcon,label:h("supergrok.increased-access-grok-3","Increased access to Grok 3")},{Icon:i.BrainIcon,label:h("supergrok.context-memory-v2","Extended memory"),detail:h("supergrok.context-memory-detail","{{tokens, number}} tokens",{tokens:128e3})},{Icon:C.default,label:h("supergrok.voice-with-vision-v2","Priority voice access")},{Icon:L.ImagePlusIcon,label:h("supergrok.imagine","Imagine image model "),isHighlighted:!0},{Icon:B.PersonalityIcon,label:h("supergrok.companions","Companions Ani and Valentine"),isHighlighted:!0},{Icon:K.PlusIcon,label:h("supergrok.everything-in-basic","Everything in Basic")}],monthlyPrice:null==er?void 0:er.monthly_price,yearlyPrice:null==er?void 0:er.yearly_price,planIndex:1,setSelectedPlanIndex:()=>{w(e=>({...e,individual:1}))}},ev={title:h("SuperGrok Heavy","SuperGrok Heavy"),ctaLabel:h("Upgrade to SuperGrok Heavy","Upgrade to Heavy"),isPopular:!1,features:[{Icon:q.ThunderIcon,label:h("supergrok-heavy.exclusive-preview-of-grok-4-heavy","Exclusive preview of Grok 4 Heavy"),isHighlighted:!0},{Icon:M.CircleCheckIcon,label:f.ENABLE_GROK_4_1_UPSELLS?h("supergrok.extended-access-grok-4-1","Extended access to Grok 4.1"):h("supergrok.extended-access-grok-4","Extended access to Grok 4")},{Icon:M.CircleCheckIcon,label:h("supergrok.extended-access-grok-3","Unlimited access to Grok 3")},{Icon:i.BrainIcon,label:h("supergrok-heavy.context-v2","Longest memory"),detail:h("supergrok-heavy.context.tokens","{{tokens, number}} tokens",{tokens:256e3})},{Icon:a.FlaskConical,label:h("supergrok-heavy.early-access-to-new-features","Early access to new features"),isHighlighted:!0},{Icon:K.PlusIcon,label:h("supergrok-heavy.everything-in-supergrok","Everything in SuperGrok")}],monthlyPrice:null==eo?void 0:eo.monthly_price,yearlyPrice:null==eo?void 0:eo.yearly_price,planIndex:2,setSelectedPlanIndex:()=>{w(e=>({...e,individual:2}))}},eb={title:h("Grok Business","Grok Business"),ctaLabel:h("Create a team","Create a team"),isPopular:!1,features:[{Icon:H.SuperGrokIcon,label:h("team.everything-in-supergrok","Everything in SuperGrok"),isHighlighted:!0},{Icon:R,label:h("team.sharing-collaboration","Sharing and collaboration")},{Icon:N,label:h("team.billing-and-invoicing","Centralized billing and invoicing")},{Icon:W.UsersIcon,label:h("team.user-access-management-v2","Advanced team + seat management")},{Icon:z,label:h("team.analytics-and-reporting","User analytics and reporting")},{Icon:U,label:h("team.domain-verification","Domain verification")},{Icon:T.GhostIcon,label:h("team.excluded-from-training","Excluded from training by default"),isHighlighted:!0},{Icon:K.PlusIcon,label:h("team.more-features","More")}],monthlyPrice:{id:"team",amount:{val:"3000"},currency:"usd",displayPrice:"$30/month",recurring:{interval:"monthly"}},yearlyPrice:{id:"team",amount:{val:"30000"},currency:"usd",displayPrice:"$300/year",recurring:{interval:"yearly"}},planIndex:0,setSelectedPlanIndex:()=>{w(e=>({...e,team:0}))}},ex={title:h("Enterprise","Enterprise"),ctaLabel:h("Contact us","Contact us"),isPopular:!1,features:[{Icon:A,label:h("enterprise.unlimited-users","Unlimited users")},{Icon:F,label:h("team.single-sign-on","Single sign-on (SSO)")},{Icon:G.RefreshCwIcon,label:h("team.directory-sync","Directory sync (SCIM)")},{Icon:D.LockIcon,label:h("enterprise.custom-rbac","Custom role-based access controls"),isHighlighted:!0},{Icon:E.default,label:h("enterprise.custom-data-retention","Custom data retention")},{Icon:O.Network,label:h("enterprise.org-structure","Flexible organizational structures")},{Icon:V.SupportIcon,label:h("enterprise.onboarding-and-support","Dedicated onboarding and support"),isHighlighted:!0},{Icon:K.PlusIcon,label:h("enterprise.more-features","More")}],monthlyPrice:"Enterprise",yearlyPrice:"Enterprise",planIndex:1,setSelectedPlanIndex:()=>{w(e=>({...e,team:1}))}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea,{}),(0,t.jsx)(y.StarsBackground,{className:"[mask-image:radial-gradient(circle_at_top,#000000_0%,transparent_80%,transparent_100%)] z-0",starColor:et?[181,181,181]:[151,196,255]}),(0,t.jsxs)("div",{className:"flex flex-col w-full items-center gap-10 h-full pt-20",children:[eh,(0,t.jsx)(ec,{subType:x,onToggle:em}),f.SUPERGROK_PAYWALL_INTERVAL_SELECTOR_AT_TOP_ENABLED&&(0,t.jsx)(ed,{subType:v,category:x,onToggle:eg}),(0,t.jsxs)("div",{className:(0,o.cn)("relative w-full",{"max-w-5xl":"individual"===x&&!f.SUPERGROK_PAYWALL_HIDE_FREE_PLAN_CARD_ENABLED,"max-w-3xl":"team"===x||"individual"===x&&f.SUPERGROK_PAYWALL_HIDE_FREE_PLAN_CARD_ENABLED}),children:["individual"===x&&(0,t.jsxs)("div",{className:(0,o.cn)("grid gap-4 w-full relative",{"grid-cols-1 justify-items-center":X,"grid-cols-3":!X&&!f.SUPERGROK_PAYWALL_HIDE_FREE_PLAN_CARD_ENABLED,"grid-cols-2":!X&&f.SUPERGROK_PAYWALL_HIDE_FREE_PLAN_CARD_ENABLED,"h-[450px]":!X}),children:[!f.SUPERGROK_PAYWALL_HIDE_FREE_PLAN_CARD_ENABLED&&(0,t.jsx)(en,{...ef,frequencySubType:v,bestSubscription:ei,tier:void 0,selectedPlanIndex:S.individual}),(0,t.jsx)(en,{...ey,frequencySubType:v,bestSubscription:ei,tier:l.SubscriptionTier.SuperGrok,selectedPlanIndex:S.individual}),(0,t.jsx)(en,{...ev,frequencySubType:v,bestSubscription:ei,tier:l.SubscriptionTier.SuperGrokPro,selectedPlanIndex:S.individual})]}),"team"===x&&(0,t.jsxs)("div",{className:(0,o.cn)("grid gap-4 w-full relative",{"grid-cols-1 justify-items-center":X,"grid-cols-2":!X,"h-[450px]":!X}),children:[(0,t.jsx)(el,{...eb,teamTier:"team",frequencySubType:v,selectedPlanIndex:S.team}),(0,t.jsx)(el,{...ex,teamTier:"enterprise",frequencySubType:v,selectedPlanIndex:S.team})]})]}),!f.SUPERGROK_PAYWALL_INTERVAL_SELECTOR_AT_TOP_ENABLED&&(0,t.jsx)(ed,{subType:v,category:x,onToggle:eg})]})]})},en=e=>{let{frequencySubType:i,tier:a,bestSubscription:s,ctaLabel:n}=e,[o,d]=(0,g.useState)(!1),c=(0,r.useLogEvent)(),{t:u}=(0,m.useTranslation)("upsell"),{subscribeViaStripe:p}=(0,l.useStripe)(),h=(0,l.useGetSubscriptionError)(),f=(0,g.useCallback)(()=>{a&&(c("click_subscribe","",{location:"upsell-plans",interval:i,tier:a}),d(!0),p(i,a).catch(e=>{let t=h(String(e))||u("subscribe.fail","Oops, something went wrong while processing your subscription.");(0,k.toast)(t),c("subscribeViaStripe_fail","",{location:"upsell-plans"}),(0,b.logError)("upsell-plans",e)}).finally(()=>{d(!1)}))},[a,!1,c,p,i,h,u]),y=(0,g.useMemo)(()=>{let e=(0,l.getSubscriptionTierValue)(s),t=(0,l.getSubscriptionTierValue)(a),i=a===s;return{isDisabled:e>=t||void 0===a,ctaLabel:i?u("Current Plan","Current Plan"):e>t?u("You are on tier","You are on {{tier}}",{tier:(0,l.getSubscriptionTierName)(s)}):n}},[s,n,u,a,!1]);return(0,t.jsx)(eo,{...e,isRedirecting:o,cardState:y,isSeatBased:!1,handleSelectCard:f})},el=e=>{let{teamTier:i}=e,[a,s]=(0,g.useState)(!1),r=(0,u.useRouter)(),{currentTeam:n}=(0,J.useEnterprise)(),{user:l}=(0,h.useSession)(),{t:o}=(0,m.useTranslation)("upsell"),{CLOUD_CONSOLE_URL:d,WEBSITE_URL:c,ACCOUNT_URL:p}=(0,$.useEnvironment)(),f=(0,g.useCallback)(()=>{s(!0),"team"===i?(null==n?void 0:n.teamId)?r.push("".concat(d,"/team/").concat(n.teamId,"/grok-business")):(null==l?void 0:l.userId)?r.push("".concat(d,"?path=grok-business")):r.push("".concat(p,"/sign-up?redirect=cloud-console&action=grok-business")):r.push("".concat(c,"/grok/business/enquire"))},[i,null==n?void 0:n.teamId,null==l?void 0:l.userId,r,d,c,p]),y=(0,g.useMemo)(()=>{let t="team"===i&&!!n;return{isDisabled:t,ctaLabel:t?o("Current Plan","Current Plan"):e.ctaLabel}},[e.ctaLabel,o,n,i]);return(0,t.jsx)(eo,{...e,isRedirecting:a,cardState:y,handleSelectCard:f,isSeatBased:!0,tier:void 0})};function eo(e){let{title:i,isPopular:a,features:s,frequencySubType:r,monthlyPrice:l,yearlyPrice:c,tier:u,isRedirecting:h,cardState:y,isSeatBased:v,handleSelectCard:b,planIndex:x,selectedPlanIndex:k,setSelectedPlanIndex:j}=e,{t:S}=(0,m.useTranslation)("upsell"),w="monthly"===r?l:c,_=(0,Z.useFeatureFlags)(),C=(0,d.useUpsellStore)(p.prop("setTargetTier")),M=k===x,E=(0,n.useMobileSize)(),N=(0,g.useCallback)(()=>{j(x),u&&C(u)},[x,j,u,C]),P=(0,g.useMemo)(()=>.5+1.5*Math.random(),[]);return(0,t.jsxs)("div",{className:(0,o.cn)("max-w-96 grow flex-1 w-full p-6 rounded-3xl bg-surface-l1 flex flex-col gap-6 shadow-sm z-[10] cursor-pointer",!E&&"self-stretch","border-2",M&&E?"border-fg-primary":"border-transparent"),onClick:N,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center w-full justify-between h-6",children:[(0,t.jsx)("h1",{className:"text-sm font-bold",children:i}),a&&(0,t.jsx)("div",{className:"text-[12px] text-fg-primary font-semibold border px-1.5 py-0.5 rounded-lg dark:bg-surface-l2 bg-surface-base",children:S("Popular","Popular")})]}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-fg-primary h-10",children:!!w&&("Free"===w?"Free":"Enterprise"===w?"Let's Talk":(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsx)(X.default,{format:{style:"currency",currencyDisplay:"narrowSymbol",currency:w.currency,maximumFractionDigits:2,minimumFractionDigits:2},suffix:v?S("upsell.seat-suffix-with-currency","{{currency}}/seat",{currency:w.currency.toUpperCase()}):"monthly"===r||_.SUPERGROK_PAYWALL_ANNUAL_PRICING_MONTHLY_EQUIVALENT_ENABLED?S("upsell.month-suffix-with-currency","{{currency}}/month",{currency:w.currency.toUpperCase()}):S("upsell.year-suffix-with-currency","{{currency}}/year",{currency:w.currency.toUpperCase()}),value:"yearly"===r&&_.SUPERGROK_PAYWALL_ANNUAL_PRICING_MONTHLY_EQUIVALENT_ENABLED?parseFloat(w.amount.val)/100/12:parseFloat(w.amount.val)/100,className:"upsell-amount-suffix"}),"yearly"===r&&(0,t.jsx)("span",{className:"text-orange-400 text-[12px] ms-1 animate-in fade-in duration-300 ease-in-out whitespace-nowrap",children:S("saving-16","saving 16%")})]}))})]}),(0,t.jsx)(f.Button,{variant:y.isDisabled?"outline":"filled",className:(0,o.cn)("w-full font-semibold text-sm",!y.isDisabled&&"hover:scale-[101%] transition-transform duration-300","hover:bg-button-filled-hover"),size:"md",rounded:!0,onClick:b,disabled:h||y.isDisabled,"aria-label":h?S("Redirecting...","Redirecting..."):y.ctaLabel,children:h?(0,t.jsx)(I.Spinner,{className:"text-ivory",size:"sm"}):y.ctaLabel}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:s.map(e=>(0,t.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[e.Icon&&(0,t.jsx)(e.Icon,{className:(0,o.cn)("text-fg-tertiary my-0.5 size-4 flex-shrink-0",{"text-fg-primary":e.isHighlighted})}),(0,t.jsxs)("div",{className:"min-h-4",children:[_.SUBSCRIPTIONS_PAGE_ANIMATE&&e.isHighlighted&&M?(0,t.jsx)(et,{className:"font-semibold text-sm",occasionalHighlight:!1,speed:P,children:e.label}):e.isHighlighted||e.isBold?(0,t.jsx)("span",{className:(0,o.cn)("inline","font-semibold"),children:e.label}):(0,t.jsx)("span",{className:"inline",children:e.label}),e.detail&&(0,t.jsx)("span",{className:(0,o.cn)("text-fg-secondary text-xs ",e.isNewRowDetail?"inline-block":"inline ps-1"),children:e.detail})]})]})},e.label))})]})}let ed=e=>{let{subType:i,category:a,onToggle:s}=e,{t:r}=(0,m.useTranslation)("upsell");return"team"===a?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r("Save-with-yearly-billing","Save with yearly billing"),(0,t.jsx)(ei.Switch,{checked:"yearly"===i,onCheckedChange:s,className:"relative"})]})},ec=e=>{let{subType:i,onToggle:a}=e,{t:s}=(0,m.useTranslation)("upsell"),r=[{key:"individual",label:s("Individual","Individual")},{key:"team",label:s("Business","Business")}];return(0,t.jsx)("div",{className:(0,o.cn)("inline-flex text-sm font-bold p-0.5 border rounded-full text-fg-secondary bg-surface-inset cursor-pointer relative"),onClick:a,children:r.map(e=>{let{key:a,label:s}=e,r=i===a;return(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("button",{type:"button",className:(0,o.cn)("relative z-10 w-full py-1.5 px-3 rounded-full flex items-center justify-center whitespace-nowrap border border-transparent transition-colors",{"text-fg-primary":r}),children:(0,t.jsx)("span",{className:"relative z-10",children:s})}),r&&(0,t.jsx)(c.motion.div,{layoutId:"activeToggle",className:"absolute inset-0 bg-surface-l1 rounded-full",transition:{type:"spring",stiffness:500,damping:35}})]},a)})})},eu=e=>{let{onOpenChange:i,isSubscribed:a,isSuccessful:s,...r}=e,{t:n}=(0,m.useTranslation)("base");return(0,t.jsxs)(S.Dialog,{...r,onOpenChange:i,children:[(0,t.jsx)(S.DialogOverlay,{className:"fixed inset-0 z-50 bg-overlay duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,t.jsx)(w.VisuallyHidden,{children:(0,t.jsx)(v.DialogTitle,{children:n("superGrok-upsell-dialog.title","Upgrade to SuperGrok")})}),(0,t.jsxs)(S.DialogContent,{className:(0,o.cn)("fixed z-50 bg-background grid inset-0 place-items-center gap-4 duration-200 w-[100vw] min-h-[100vh] overflow-x-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-6"),onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,t.jsx)(er,{onSuccess:()=>null==i?void 0:i(!1),isSubscribed:a,isSuccessful:s}),(0,t.jsx)(f.Button,{variant:"ghostSecondary",size:"iconMd",className:"absolute top-4 right-4",onClick:()=>null==i?void 0:i(!1),"aria-label":n("Close","Close"),children:(0,t.jsx)(j.XIcon,{className:"size-5"})})]})]})},ep=()=>{let e=(0,h.useSession)(),{isSuperGrokUser:i,isSuperGrokProUser:a,isEnterpriseUser:s}=(0,l.useSubscriptions)(),r=(0,l.useCheckoutSuccess)(),n=(0,d.useUpsellStore)(p.prop("isUpselling")),o=(0,d.useUpsellStore)(p.prop("setIsUpselling"));return e.user?(0,t.jsx)(eu,{open:n,isSubscribed:i||a||s||!1,isSuccessful:r,onOpenChange:e=>{o(e)}}):null};e.s(["UpsellSuperGrokSmall",()=>ey],171686);var eg=e.i(500751),em=e.i(59238),eh=e.i(128803),ef=e.i(290583);function ey(){let{t:e}=(0,m.useTranslation)("upsell"),{isVisible:i,setClosedUpsellSmallKey:a,upsellSmallKey:s}=function(){var e;let t=(0,Z.useFeatureFlags)(),i=(0,g.useMemo)(()=>eb.safeParse(t.UPSELL_SMALL_KEY.value),[t.UPSELL_SMALL_KEY.value]),a=null==(e=i.data)?void 0:e.key,[s,r]=(0,eh.useLocalStorage)("upsell-small-closed",""),n=i.success&&a!==s,o=(0,h.useSession)(),c=(0,d.useUpsellStore)(e=>e.isUpselling),u=(0,em.useIsUpsellLayerVisible)(d.UPSELL_SMALL_PRIORITY),{isEnterpriseUser:p,isSuperGrokUser:m,isSuperGrokProUser:f,isPending:y}=(0,l.useSubscriptions)();return{isVisible:!(!n||c||p||m||f||y||!o.user)&&u,setClosedUpsellSmallKey:r,upsellSmallKey:a}}(),n=(0,r.useLogEvent)(),o=(0,g.useCallback)(()=>{let{setIsUpselling:e}=d.useUpsellStore.getState();n("upsell_card_clicked","",{location:"upsell-small"}),e(!0)},[n]),c=(0,g.useCallback)(e=>{e.stopPropagation(),a(s)},[a,s]);return(0,t.jsx)(ev,{isVisible:i,logo:(0,t.jsx)(es.SuperGrokWordPlain,{className:"h-[20px] mb-1",isDark:!0}),description:e("upsell-small.description","Unlock extended capabilities"),handleClick:o,handleClickClose:c})}function ev(e){let{isVisible:i,handleClick:a,handleClickClose:s,logo:r,description:n}=e,{t:l}=(0,m.useTranslation)("upsell");return(0,t.jsx)(x.AnimatePresence,{children:i&&(0,t.jsxs)(c.motion.div,{role:"button",className:(0,o.cn)("upsell-small","relative sm:fixed sm:bottom-2 sm:right-2","px-5 py-4 items-center w-[calc(100%-16px)] bg-black text-xs text-white border cursor-pointer","border-card min-[384px]:w-max min-[384px]:min-w-52 rounded-3xl group text-left","flex gap-4 dark","hover:scale-[1.01]"),onClick:a,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:900,damping:30,duration:.1},children:[(0,t.jsx)(y.StarsBackground,{starDensity:.001,className:"rounded-[23px]"}),(0,t.jsx)("div",{className:"absolute inset-0 flex justify-center top-0 overflow-hidden rounded-[23px]",children:(0,t.jsx)("div",{className:"size-80 bg-red-500 bg-gradient-to-r from-sunset via-breeze to-cobalt aspect-square opacity-10 absolute bottom-4 blur-[32px] rounded-full"})}),(0,t.jsx)(f.Button,{className:(0,o.cn)("absolute transition-all scale-50 opacity-0 -top-1.5 -right-1.5","group-hover:opacity-100 group-hover:scale-100 border border-border-l1 bg-surface-base hover:bg-surface-l2"),variant:"none",size:"iconXs",rounded:!0,"aria-label":l("Hide upsell banner","Hide upsell banner"),onClick:s,children:(0,t.jsx)(eg.PopInOut,{children:(0,t.jsx)(j.XIcon,{className:"size-4"})},"edit")}),(0,t.jsxs)("div",{className:"w-full z-10",children:[(0,t.jsx)("div",{className:"flex items-start",children:r}),(0,t.jsx)("p",{className:"text-muted-foreground",children:n})]}),(0,t.jsx)(f.Button,{rounded:!0,variant:"filled",className:"text-sm font-semibold z-10 bg-white hover:bg-gray-100",children:l("Upgrade","Upgrade")})]})})}let eb=ef.z.object({key:ef.z.string()})},468755,e=>{"use strict";e.s(["RadialProgress",()=>i]);var t=e.i(498693);let i=e=>{let{trackClassName:i,progressClassName:a,size:s,thickness:r,progressPercentage:n,offsetDegrees:l=0}=e,o=100/s*r,d=50-o/2,c=2*Math.PI*d,u=1-n/100,p=c*u,g=r/2;p+=g*(1-u*u);let m=-90+g/c*180+l;return(0,t.jsx)("svg",{width:s,height:s,viewBox:"0 0 100 100",children:(0,t.jsxs)("g",{transform:"rotate("+m+" 50 50)",children:[(0,t.jsx)("circle",{cx:"50",cy:"50",r:d,strokeWidth:o,fill:"none",className:i}),n>=100?(0,t.jsx)("circle",{cx:"50",cy:"50",r:d,strokeWidth:o,fill:"none",className:a}):n>0?(0,t.jsx)("circle",{opacity:function(e,t,i){return Math.min(Math.max((i-0)/(1.5-e),0),1)}(0,1.5,n),cx:"50",cy:"50",r:d,strokeWidth:o,fill:"none",className:a,strokeDasharray:"".concat(c," ").concat(c),strokeDashoffset:p,strokeLinecap:"round"}):null]})})}},432286,495794,e=>{"use strict";e.s(["startOfMonth",()=>i],432286);var t=e.i(516467);function i(e,i){let a=(0,t.toDate)(e,null==i?void 0:i.in);return a.setDate(1),a.setHours(0,0,0,0),a}e.s(["addMonths",()=>s],495794);var a=e.i(487122);function s(e,i,s){let r=(0,t.toDate)(e,null==s?void 0:s.in);if(isNaN(i))return(0,a.constructFrom)((null==s?void 0:s.in)||e,NaN);if(!i)return r;let n=r.getDate(),l=(0,a.constructFrom)((null==s?void 0:s.in)||e,r.getTime());return(l.setMonth(r.getMonth()+i+1,0),n>=l.getDate())?l:(r.setFullYear(l.getFullYear(),l.getMonth(),n),r)}},850421,e=>{"use strict";e.s(["ImageEditorDialog",()=>en],850421);var t=e.i(498693),i=e.i(246429),a=e.i(637797),s=e.i(420986),r=e.i(72290),n=e.i(497985);e.i(685846);var l=e.i(376098),o=e.i(90476),d=e.i(12465);let c=(0,e.i(111041).default)("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);var u=e.i(443696),p=e.i(889963),g=e.i(122088),m=e.i(969736),h=e.i(486492),f=e.i(133735),y=e.i(555309),v=e.i(346306);e.i(18545);var b=e.i(116212),x=e.i(723008);let k=e=>{let{hasImage:a,prompt:s,onParentPeek:r,focusedImageUrl:k,parentImageUrl:I,isStreaming:j,onRegenerate:S,onClose:w}=e,{t:_}=(0,b.useTranslation)("base"),[C,M]=(0,v.useState)(!1),[E,N]=(0,v.useState)(void 0),[P,T]=(0,v.useState)(!1),U=(0,g.useMobileUa)(),R=(0,i.useChatPageStore)(e=>e.conversationId),L=(0,i.useChatPageStore)(e=>e.lastMessageId),{editImagePresets:A}=(0,p.useEditImagePresets)(),z=(0,v.useMemo)(()=>{if(!E)return;let e=A.flatMap(e=>e.presets).find(e=>e.prompt===E);return e?(0,t.jsxs)(t.Fragment,{children:[e.icon&&v.default.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("h1",{className:"text-lg font-semibold truncate",children:e.label})]}):(0,t.jsx)("h1",{className:"text-lg font-semibold truncate",children:E})},[E,A]),D=(0,v.useCallback)(()=>{!P&&k&&(T(!0),(0,m.downloadImage)(k,null==k?void 0:k.split("/").pop()).catch((0,h.createLogError)("image-editor:handleDownload")).finally(()=>T(!1)))},[k,P]);return(0,v.useEffect)(()=>{s&&E!==s&&N(s)},[s,E]),(0,v.useEffect)(()=>{I&&!C&&M(!0)},[I,C]),(0,t.jsx)("header",{className:"flex justify-between w-full items-center min-h-10 gap-3  relative z-30 flex-shrink-0",children:(0,t.jsxs)(f.AnimatePresence,{mode:"popLayout",children:[E&&(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"flex items-center gap-2 w-full overflow-hidden min-w-0",children:z},E),(0,t.jsxs)("div",{className:"flex gap-1 ms-auto shrink-0",children:[(0,t.jsxs)(t.Fragment,{children:[C&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(u.ButtonWithTooltip,{variant:"secondary",shape:"circle",size:"md","aria-label":_("Compare","Compare"),tooltipContent:_("Compare","Compare"),tooltipContentProps:{side:"bottom"},onMouseDown:()=>r(!0),onMouseUp:()=>r(!1),onMouseLeave:()=>r(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),r(!0)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),r(!1)},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},onContextMenuCapture:e=>{e.preventDefault(),e.stopPropagation()},asChild:!0,disabled:j||!I,children:(0,t.jsx)(y.motion.button,{whileTap:!j&&I?{scale:.9}:void 0,children:(0,t.jsx)(c,{className:"size-5"})})})},"compare"),(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(u.ButtonWithTooltip,{size:"md",variant:"tertiary",shape:"circle",className:"text-fg-primary","aria-label":_("Regenerate","Regenerate"),tooltipContent:_("Regenerate","Regenerate"),tooltipContentProps:{side:"bottom"},asChild:!0,disabled:j||!I,onClick:S,children:(0,t.jsx)(y.motion.button,{whileTap:!j&&I?{scale:.9}:void 0,children:(0,t.jsx)(o.RefreshCwIcon,{className:"size-5"})})})},"regenerate")]}),a&&(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(u.ButtonWithTooltip,{variant:"tertiary",size:"md",shape:"circle",className:"text-fg-primary","aria-label":_("Download Image","Download Image"),tooltipContent:_("Download Image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:j||!k||P,onClick:D,children:P?(0,t.jsx)(x.Spinner,{size:"xs"}):(0,t.jsx)(l.DownloadIcon,{className:"size-5"})})},"download"),R&&L&&(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(n.ShareButton,{variant:"tertiary",size:"md",shape:"pill",className:"text-fg-primary",showLabel:!0,conversationId:R,responseId:L,iconProps:{size:20}})},"share")]}),U?(0,t.jsx)(u.Button,{"aria-label":_("Close Image Editor","Close Image Editor"),variant:"secondary",size:"md",shape:"circle",onClick:w,children:(0,t.jsx)(d.XIcon,{size:20})}):(0,t.jsx)(u.ButtonWithTooltip,{"aria-label":_("Close Image Editor","Close Image Editor"),tooltipContent:_("Close Image Editor","Close Image Editor"),tooltipContentProps:{side:"bottom"},variant:"secondary",size:"md",shape:"circle",onClick:w,children:(0,t.jsx)(d.XIcon,{size:20})})]})]})})};var I=e.i(448888),j=e.i(211959);let S=e=>{let{images:i,focusedOption:a,isStreaming:s,onSelect:r}=e;return(0,t.jsx)(y.motion.aside,{className:"lg:fixed top-0 inset-0 lg:top-0 lg:right-0 lg:left-auto flex lg:flex-col items-center justify-center lg:h-full gap-4 pb-3 lg:p-6 pointer-events-none z-30",variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,t.jsx)(f.AnimatePresence,{mode:"popLayout",children:i.map((e,i)=>(0,t.jsx)(y.motion.button,{className:(0,j.cn)("size-16 sm:size-20 relative rounded-xl border bg-background p-1 pointer-events-auto",{"ring-primary ring-2":i===a}),onClick:()=>r(i),whileTap:i!==a?{scale:.95}:{},variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,t.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-lg",children:(0,t.jsx)("figure",{className:"absolute -translate-x-1/2 left-1/2 h-full aspect-[4/3]",children:(0,t.jsx)(I.GrokImage,{isModerated:e.isModerated,status:s?"streaming":"finished",iconSize:24,intermediateResults:s?e.progressMap:[{progress:1,imageUrl:e.url}]})})})},e.id))})},"image-editor-option-nav")};var w=e.i(310158),_=e.i(383274),C=e.i(50636),M=e.i(592766),E=e.i(511765),N=e.i(920958),P=e.i(259473),T=e.i(688578),U=e.i(536459),R=e.i(159422),L=e.i(470753),A=e.i(633918),z=e.i(533431),D=e.i(715127);let F=e=>{let{isEditingCurrentImage:i,setIsPeekingParent:a,isPeekingParent:s,focusedImage:r,parentImageUrl:n,generatedImageHeight:l,generatedImageWidth:o,isFinalImageLoaded:d,setIsFinalImageLoaded:c,isParentImageLoaded:u,setIsParentImageLoaded:p}=e,[g,m]=(0,v.useState)([]),[h,b]=(0,v.useState)(!1),[x,k]=(0,v.useState)(!1),[S,w]=(0,v.useState)(!0),_=(0,v.useMemo)(()=>!!(l&&o),[l,o]),C=(0,v.useMemo)(()=>l&&o?o/l:4/3,[l,o]);return(0,v.useEffect)(()=>{(i||!S)&&(null==r?void 0:r.progressMap)?m(r.progressMap):!i&&(null==r?void 0:r.url)?m(e=>[...e,{progress:1,imageUrl:r.url||""}]):m([])},[i,null==r?void 0:r.url,null==r?void 0:r.progressMap,S]),(0,v.useEffect)(()=>{if(!h)return void a(!1);let e=setTimeout(()=>{h&&!x&&a(!0)},100);return()=>clearTimeout(e)},[h,x,a]),(0,v.useEffect)(()=>{i&&S&&w(!1),i||!d||S||w(!0)},[i,d,S]),(0,t.jsx)("figure",{className:(0,j.cn)("relative group/image w-full max-w-5xl 2xl:max-w-6xl overflow-hidden rounded-lg select-none",!i&&n&&(s?"cursor-grabbing":"cursor-grab")),onDragStart:e=>{if(s)return void e.preventDefault();k(!0)},onDragEnd:()=>{k(!1),b(!1)},onMouseDown:e=>{0===e.button&&b(!0)},onMouseUp:()=>b(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),b(!0)},onTouchEnd:e=>{e.preventDefault(),b(!1)},onMouseLeave:()=>{b(!1),k(!1)},children:(0,t.jsx)(f.AnimatePresence,{mode:"wait",children:i||!S?_?(0,t.jsx)(y.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:1,filter:"blur(0px)",transition:{delay:1.5}},transition:{ease:"easeInOut"},className:"h-full mx-auto",style:{aspectRatio:C,maxHeight:l},children:(0,t.jsx)(I.GrokImage,{status:"streaming",intermediateResults:g,isModerated:null==r?void 0:r.isModerated,aspectRatio:C})},"streaming-image"):(0,t.jsx)(O,{}):(0,t.jsxs)("div",{className:"flex relative items-center justify-center w-full h-full",children:[(null==r?void 0:r.url)&&(0,t.jsxs)(t.Fragment,{children:[!d&&(0,t.jsx)(O,{className:"absolute z-20 inset-0"}),(0,t.jsx)(y.motion.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},exit:"hidden",animate:n&&s||!d?"hidden":"visible",transition:{ease:"easeInOut"},src:r.url,alt:"active-image",className:"max-h-full aspect-auto rounded-lg",onLoad:()=>c(!0)},"finished-image")]}),(0,t.jsx)(f.AnimatePresence,{children:!i&&n&&s&&(0,t.jsxs)(y.motion.div,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},initial:"hidden",exit:"hidden",animate:"visible",transition:{ease:"easeInOut"},className:"absolute z-10 w-full h-full flex items-center overflow-hidden",children:[!u&&(0,t.jsx)(O,{className:"absolute z-20 inset-0"}),(0,t.jsx)(y.motion.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},animate:u?"visible":"hidden",src:n,alt:"parent-image",className:"max-h-full aspect-auto mx-auto rounded-lg",onLoad:()=>p(!0)},"parent-image")]},"parent-image-container")})]})})})},O=e=>{let{className:i}=e;return(0,t.jsx)(y.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,j.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",i),children:(0,t.jsx)(D.ImageIcon,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")};var B=e.i(328788),K=e.i(180605),G=e.i(747680),H=e.i(431533),V=e.i(763578),q=e.i(659065),W=e.i(879085),Y=e.i(667965);let Z=e=>{let{hasImage:i,onSend:a,isStreaming:s}=e,{editImagePresets:r}=(0,p.useEditImagePresets)(),n=(0,B.useMobileSize)(),{t:l}=(0,b.useTranslation)("image-editor"),[o,d]=(0,v.useState)(null),[c,u]=(0,v.useState)(null),g=(0,v.useMemo)(()=>s||!i,[s,i]),m=(0,v.useCallback)(e=>{d(t=>t===e?null:e)},[d]),h=(0,v.useCallback)(e=>{if(!s)return d(null),a(e.prompt,e.presetId)},[s,a]),f=(0,v.useCallback)(()=>{if(!s)return U.useImageEditorStore.getState().close(),d(null),a("Make video","make-video")},[s,a]),x=(0,v.useCallback)(e=>{let t=document.querySelector('[data-preset-id="'.concat(e,'"]'));if(!t)return{};let i=t.getBoundingClientRect();return i.right+12+200>window.innerWidth?{left:i.left-200-12,top:i.top+(i.height-150)/2}:{left:i.right+12,top:i.top+(i.height-150)/2}},[]);return(0,v.useEffect)(()=>{if(!o||n)return void u(null);let e=()=>{let e=document.body.querySelector("[data-highlighted][data-preset-id]"),t=(null==e?void 0:e.getAttribute("data-preset-id"))||null;t&&u(t)};e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["data-highlighted"],subtree:!0}),()=>{t.disconnect()}},[o,n]),(0,t.jsxs)("div",{className:"@container flex w-full xs:justify-center justify-start items-center overflow-x-auto xs:overflow-visible gap-2 xs:gap-3 relative z-30 no-scrollbar",children:[(0,t.jsx)(y.motion.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut"},className:"bg-surface-base rounded-full",children:(0,t.jsxs)(V.Button,{variant:"filledSecondary",size:"md",className:"flex items-center justify-start py-3 border border-border-l1 rounded-3xl hover:text-fg-primary",onClick:f,children:[(0,t.jsx)(Y.Play,{fill:"currentColor",strokeWidth:0,className:"size-4"}),l("button.make-video","Make video")]},"make-video")},"make-video-animation"),r.map((e,i)=>(0,t.jsx)(y.motion.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut",delay:.06*(i+1)},className:"bg-surface-base rounded-full",children:n?(0,t.jsxs)(q.Drawer,{open:e.category===o,onOpenChange:t=>{t?d(e.category):d(null)},children:[(0,t.jsx)(q.DrawerTrigger,{disabled:g,asChild:!0,children:(0,t.jsx)(X,{category:e,disabled:g})}),(0,t.jsxs)(q.DrawerContent,{className:"max-h-[90dvh]",children:[(0,t.jsx)(q.DrawerHeader,{children:(0,t.jsxs)(q.DrawerTitle,{className:"flex items-center justify-center gap-2",children:[e.icon&&v.default.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),e.label]})}),(0,t.jsx)("div",{className:"p-2 space-y-2 overflow-auto",children:e.presets.map(e=>(0,t.jsxs)(V.Button,{variant:"ghost",size:"lg",className:"w-full flex items-center justify-start gap-3 h-auto py-3",onClick:()=>h(e),children:[e.icon&&v.default.createElement(e.icon,{size:18,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("span",{children:e.label})]},e.presetId))})]})]}):(0,t.jsxs)(W.DropdownMenu,{open:e.category===o,onOpenChange:()=>m(e.category),children:[(0,t.jsx)(W.DropdownMenuTrigger,{disabled:g,asChild:!0,children:(0,t.jsx)(X,{category:e,disabled:g})}),(0,t.jsx)(W.DropdownMenuContent,{hideWhenDetached:!0,side:"top",sideOffset:8,className:"min-w-60 space-y-0.5 z-[100000]",onMouseLeave:()=>{u(null)},onWheel:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.presets.map(i=>(0,t.jsxs)(W.DropdownMenuItem,{"data-preset-id":i.presetId,className:"flex items-center gap-2",onSelect:()=>h(i),children:[i.icon&&v.default.createElement(i.icon,{size:16,className:"text-secondary flex-shrink-0"}),i.label,c===i.presetId&&(0,G.createPortal)((0,t.jsxs)(y.motion.div,{layoutId:"preset-preview",className:"fixed w-[200px] h-[150px] bg-surface-l4 border border-border-l1 rounded-2xl shadow-lg z-50 pointer-events-none flex items-center justify-center p-1.5",style:x(i.presetId),children:[(0,t.jsx)(H.ImageLoader,{className:"absolute inset-0"}),i.previewUrl&&(0,t.jsx)(K.default,{src:i.previewUrl,alt:i.presetId,width:200,height:150,priority:!n&&o===e.category,className:"w-full h-full object-cover rounded-xl relative z-10"})]}),document.body)]},i.presetId))})]})},e.category))]})},X=v.default.forwardRef((e,i)=>{let{category:a,disabled:s,...r}=e;return(0,t.jsxs)(V.Button,{ref:i,size:"md",variant:"filledSecondary",rounded:!0,className:(0,j.cn)(!s&&"*:hover:text-primary transition-all"),disabled:s,...r,children:[a.icon&&v.default.createElement(a.icon,{size:16,className:"flex-shrink-0 text-secondary transition-colors"}),(0,t.jsx)("span",{children:a.label})]})});var Q=e.i(949033),J=e.i(351958),$=e.i(110098),ee=e.i(218946);let et=e=>{let{onUploadImage:a}=e,{t:s}=(0,b.useTranslation)("base"),n=(0,T.useFileStore)(A.prop("fetchUploadFile")),l=(0,T.useFileStore)(A.prop("removeByConversationId")),o=(0,i.useChatPageStore)(A.prop("conversationId")),{ASSET_SERVER_URL:d}=(0,r.useEnvironment)(),c=(0,ee.useRequestErrorToastFn)(),u=(0,v.useRef)(null),[p,g]=(0,v.useState)(!1),[m,h]=(0,v.useState)(!1),k=(0,v.useCallback)(()=>{var e;null==(e=u.current)||e.click()},[]),I=(0,v.useCallback)(async e=>{let t;if(1!==e.length||!e[0])return void z.toast.error(s("Only a single image file is allowed","Only a single image file is allowed"));if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e[0].type))return void z.toast.error(s("Only image files are allowed","Only image files are allowed"));h(!0);try{let i=n(e[0],o||"no_conversation_id");t=await i.metadataPromise}catch(e){c("image-editor-upload:uploadFile",e)}t instanceof Error&&c("image-editor-upload:uploadFile",t,s("Failed to upload file","Failed to upload file")),h(!1),l(o||"no_conversation_id"),!t||t instanceof Error||a({url:(0,P.getAssetUrl)(d,t.fileUri),metadata:t})},[s,n,o,a,d,l,c]),j=(0,v.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m||g(!0)},[m]),S=(0,v.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g(!1)},[]),w=(0,v.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),g(!1),!m)return I(Array.from(e.dataTransfer.files))},[I,m]),_=(0,v.useCallback)(e=>{if(e.target.files)return I(Array.from(e.target.files)).finally(()=>{u.current&&(u.current.value="")})},[I]);return(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},onDragOver:j,onDragLeave:S,onDrop:w,className:"border resize transition-colors w-full max-w-7xl h-full flex justify-center items-center border-border-l1 rounded-2xl p-8 mb-3 text-center ".concat(p&&!m&&"bg-surface-l1 border-border-l1"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"p-4 rounded-full text-fg-secondary transition-colors bg-surface-l1",children:(0,t.jsx)(f.AnimatePresence,{mode:"popLayout",children:p&&!m?(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(Q.Files,{className:"size-6"})},"files"):(0,t.jsx)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(J.ImagePlusIcon,{className:"size-6"})},"image-plus")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-primary",children:s("Upload an image to begin","Upload an image to begin")}),(0,t.jsx)(f.AnimatePresence,{mode:"popLayout",children:m?(0,t.jsx)(y.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Uploading image","Uploading image")},"uploading"):p?(0,t.jsx)(y.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Drop image here","Drop image here")},"dragging"):(0,t.jsx)(y.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Drag and drop to upload","Drag and drop to upload")},"not-dragging")})]}),(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsxs)(V.Button,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:m,autoFocus:!0,onClick:k,children:[m?(0,t.jsx)(x.Spinner,{size:"xxs"}):(0,t.jsx)($.Upload,{className:"size-4 text-fg-secondary"}),s("Upload","Upload")]})}),(0,t.jsx)("input",{ref:u,className:"hidden",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:_,multiple:!1,"data-testid":"file-input"})]})})},ei=()=>{let{ASSET_SERVER_URL:e}=(0,r.useEnvironment)(),n=(0,C.useFeatureFlags)(),l=(0,N.useLogEvent)(),{t:o}=(0,b.useTranslation)("base"),d=(0,_.useMaybeRefreshAnonSession)(),{handleSendStart:c,timeToSendStart:u,consumeTimeToSendMs:p}=(0,M.useImageEditingMetrics)(),[g,m]=(0,E.useLocalStorage)("image-editor-first-open",!0),y=(0,U.useImageEditorStore)(A.prop("isOpen")),x=(0,U.useImageEditorStore)(A.prop("currentImage")),I=(0,U.useImageEditorStore)(A.prop("setImage")),j=(0,i.useChatPageStore)(A.prop("conversationId")),D=(0,i.useChatPageStore)(A.prop("streamedMessageId")),O=(0,i.useChatPageStore)(A.prop("lastMessageId")),B=(0,R.useResponseStore)(e=>e.byId[null!=D?D:""]),K=(0,R.useResponseStore)(A.prop("byId")),G=(0,v.useMemo)(()=>{var e;return null!=(e=R.useResponseStore.getState().byConversationId[null!=j?j:""])?e:[]},[j]),H=(0,s.useGenImagineVideoFromMediaUrl)(),[V,q]=(0,v.useState)(""),[W,Y]=(0,v.useState)(!1),[X,Q]=(0,v.useState)(null),[J,$]=(0,v.useState)(!1),[ee,ei]=(0,v.useState)(!1),[ea,es]=(0,v.useState)(!1),[er,en]=(0,v.useState)(!1),[el,eo]=(0,v.useState)(!1),ed=(0,v.useMemo)(()=>!!x,[x]),ec=(0,v.useMemo)(()=>!!(x&&"key"in x),[x]),eu=(0,v.useMemo)(()=>!!(x&&"metadata"in x),[x]),ep=(0,v.useMemo)(()=>{if(ec){if(W)return!X&&B&&Q(B.responseId),B||K[null!=X?X:""];let e=G.filter(e=>e.streamingImageById).find(e=>{for(let t in e.streamingImageById){let i=e.streamingImageById[t];if(!i)continue;let a=i[100];if((null==a?void 0:a.imageUrl)===(null==x?void 0:x.url))return!0}});return e||(null==G?void 0:G.find(e=>{var t,i;return null==(t=e.generatedImageUrls)?void 0:t.includes(null!=(i=x.assetKey)?i:"")}))}},[x,G,ec,W,B,X,K]),eg=(0,v.useMemo)(()=>(null==ep?void 0:ep.parentResponseId)?K[ep.parentResponseId]:void 0,[ep,K]),em=(0,v.useMemo)(()=>eg?(0,P.getAssetUrl)(e,eg.imageEditUri):void 0,[eg,e]),eh=(0,v.useMemo)(()=>{if(eu){var t,i;return[{id:null!=(t=x.metadata.fileUri)?t:"",url:null!=(i=(0,P.getAssetUrl)(e,x.metadata.fileUri))?i:"",isModerated:!1,progressMap:void 0}]}return ec?ep?W&&ep.streamingImageById?Object.entries(ep.streamingImageById).map(t=>{var i;let[a,s]=t,r=Object.keys(s).map(Number),n=s[Math.max(...r)];return{id:a,url:null!=(i=(0,P.getAssetUrl)(e,null==n?void 0:n.imageUrl))?i:"",isModerated:!1,progressMap:r.map(t=>{var i,a;return{progress:t/100,imageUrl:null!=(a=(0,P.getAssetUrl)(e,null==(i=s[t])?void 0:i.imageUrl))?a:""}})}}):ep.generatedImageUrls.map(t=>{var i,a;let s=null!=(a=Object.values(null!=(i=ep.streamingImageById)?i:{})[0])?a:{},r=Object.keys(s).map(Number);return{id:t,url:(0,P.getAssetUrl)(e,t),isModerated:!1,progressMap:r.length>0?r.map(t=>{var i,a;return{progress:t/100,imageUrl:null!=(a=(0,P.getAssetUrl)(e,null==(i=s[t])?void 0:i.imageUrl))?a:""}}):void 0}}):[]:[]},[x,ep,ec,W,e,eu]),ef=(0,v.useMemo)(()=>eh.length>1?eh.find(e=>e.id===(null==x?void 0:x.key)||e.id===(null==x?void 0:x.assetKey)):eh[0],[eh,x]),ey=(0,v.useMemo)(()=>(0,t.jsx)(F,{isEditingCurrentImage:W,focusedImage:ef,parentImageUrl:er?void 0:em,isPeekingParent:J,setIsPeekingParent:$,generatedImageWidth:null==ep?void 0:ep.generatedImageWidth,generatedImageHeight:null==ep?void 0:ep.generatedImageHeight,isParentImageLoaded:ea,isFinalImageLoaded:el,setIsFinalImageLoaded:eo,setIsParentImageLoaded:es}),[W,ef,J,em,null==ep?void 0:ep.generatedImageWidth,null==ep?void 0:ep.generatedImageHeight,ea,el,er]),ev=(0,v.useCallback)(()=>{(null==ef?void 0:ef.url)&&H(ef.url).catch(e=>{(0,h.logError)("image-editor:handleMakeVideo",e)})},[null==ef?void 0:ef.url,H]),eb=(0,v.useCallback)(e=>{e&&I(e)},[I]),ex=(0,v.useCallback)(e=>{let t=eh[e];t&&(W&&I({key:t.id}),I({key:t.id,assetKey:t.id,url:t.url,isModerated:t.isModerated,progress:(null==t?void 0:t.progressMap)?Math.max(...Object.keys(t.progressMap).map(Number)):1}))},[eh,W,I]),ek=(0,v.useCallback)(async e=>(ei(!0),e().finally(()=>{ei(!1)})),[]),eI=(0,a.useHandleAbort)("image-workbench:handleAbort",ek),ej=(0,v.useCallback)(async(e,t)=>{if(!e.trim()||!(null==x?void 0:x.url))throw Error("No message or image");let a=i.useChatPageStore.getState(),s=L.useSettingsStore.getState(),r=R.useResponseStore.getState(),l=T.useFileStore.getState(),o=t.replace(/^https?:\/\/[^/]+\/?/,"");q(""),l.removeByConversationId(a.conversationId||"no_conversation_id"),l.removeAttachByConversationId(a.conversationId||"no_conversation_id"),await d();let c=a.lastMessageId?r.byId[a.lastMessageId]:void 0;if(a.lastMessageId&&!c)throw Error("Last message is missing");if((null==c?void 0:c.sender)==="human")throw Error("Last message is human");"none"!==a.reasoningMode&&a.setReasoningMode("none");let u={message:e,toolOverrides:{imageGen:!0},imageEditUri:o,enableRetries:!0},p=eu&&x.metadata.fileMetadataId&&!(null==eg?void 0:eg.message)?[x.metadata.fileMetadataId]:[];if(eu)return a.conversationId?a.sendResponse({...u,parentResponseId:a.lastMessageId,conversationId:a.conversationId,fileAttachmentIds:p,setOpimisticUserResponse:!0,setUserResponse:!0,ff:n}):a.establishNewConversation({...u,fileAttachmentIds:[x.metadata.fileMetadataId],temporary:s.isIncognito,ff:n});if(!a.conversationId)throw Error("No conversation id");return a.sendResponse({...u,parentResponseId:a.lastMessageId,conversationId:a.conversationId,fileAttachmentIds:p,setOpimisticUserResponse:!0,setUserResponse:!0,ff:n})},[x,d,eu,eg,n]),eS=(0,v.useCallback)(async(e,t)=>{let a=i.useChatPageStore.getState(),s=R.useResponseStore.getState(),r=a.streamedMessageId?s.byId[a.streamedMessageId]:void 0;return["streaming","optimistic","reconnecting"].includes((null==r?void 0:r.state)||"closed")&&await eI(),Y(!0),ej(e,t).catch(()=>{U.useImageEditorStore.getState().close()})},[ej,eI]),ew=(0,v.useCallback)(async(e,t)=>{if(e.trim()&&(null==ef?void 0:ef.url))return(l("edit_image_start",(0,M.formatImageEditUri)(ef.url),{queryType:t?"preset":"manual",location:"image-editor",presetId:t||"",message:e,messageLength:String(e.length),timeToSendMs:String(p())}),"make-video"===t)?ev():eS(e,ef.url).catch(e=>{(0,h.logError)("image-viewer:ImageEditor:handleEditCurrentImage",e)})},[eS,ef,l,p,ev]),e_=(0,v.useCallback)(()=>{if((null==eg?void 0:eg.message)&&em)return l("edit_image_start",(0,M.formatImageEditUri)(em),{queryType:"regenerate",location:"image-editor",presetId:"",message:null==eg?void 0:eg.message,messageLength:String(null==eg?void 0:eg.message),timeToSendMs:String(p())}),eS(eg.message,em).catch(e=>{(0,h.logError)("image-viewer:ImageEditor:handleRegenerate",e)})},[eg,em,eS,l,p]);(0,v.useEffect)(()=>{W&&eh.length&&eh[0]&&!eh.find(e=>e.id===x.key)&&I({key:eh[0].id})},[eh,W,x,I]),(0,v.useEffect)(()=>{let t=U.useImageEditorStore.getState();if(W&&B&&"error"===B.state)return t.close();if(W&&X&&B&&"closed"===B.state){var i,a,s,r;if(Y(!1),Q(null),!O)return t.close();let n=K[O];if(!n)return t.close();let o=null==(s=n.streamingImageById)||null==(a=s[null!=(r=null==x?void 0:x.key)?r:""])||null==(i=a[100])?void 0:i.imageUrl;if(!o)return t.close();l("edit_image_end",(0,M.formatImageEditUri)((null==eg?void 0:eg.imageEditUri)||""),{location:"image-editor"}),I({key:o,assetKey:o,url:(0,P.getAssetUrl)(e,o),progress:100,isModerated:!1})}},[eg,B,W,X,O,K,e,l,I]),(0,v.useEffect)(()=>{W||ee||void 0!==u||c()},[p,c,W,ee,u]),(0,v.useEffect)(()=>{if(null==ef?void 0:ef.url){eo(!1);let e=new Image;e.onload=()=>eo(!0),e.src=ef.url}},[null==ef?void 0:ef.url]),(0,v.useEffect)(()=>{if(em){es(!1),en(!1);let e=new Image;e.onload=()=>es(!0),e.onerror=()=>en(!0),e.src=em}},[em]),(0,v.useEffect)(()=>{g&&y&&(m(!1),z.toast.message((0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-fg-primary font-bold",children:o("image-editor-welcome.title","Welcome to Image Editor")}),(0,t.jsx)("p",{className:"text-fg-secondary",children:o("image-editor-welcome.description","A focused space for you to transform images with Grok to anything you can imagine.")})]}),{duration:7e3}))},[g,y,m,o]);let eC=(0,U.useImageEditorStore)(A.prop("close"));return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-between gap-6 sm:gap-20 w-full h-full",children:[(0,t.jsx)(k,{hasImage:ed,prompt:em?null==eg?void 0:eg.message:void 0,focusedImageUrl:null==ef?void 0:ef.url,parentImageUrl:er?void 0:em,isStreaming:W||ee,onParentPeek:e=>$(e),onClose:eC,onRegenerate:e_}),ed?ey:y&&(0,t.jsx)(et,{onUploadImage:eb}),(0,t.jsx)("footer",{className:"relative w-full max-w-2xl h-16 flex-shrink-0 mt-12 sm:mt-0",children:(0,t.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex flex-col gap-4",children:[(0,t.jsx)(f.AnimatePresence,{mode:"popLayout",children:ed&&eh&&eh.length>1&&(0,t.jsx)(S,{isStreaming:W||ee,images:eh,focusedOption:eh.findIndex(e=>e.id===(null==ef?void 0:ef.id))||0,onSelect:ex})}),(0,t.jsx)(Z,{hasImage:ed,isStreaming:W||ee,onSend:ew}),(0,t.jsx)(w.ImageEditorQueryBar,{hasImage:ed,inputValue:V,isStreaming:W||ee,onInputValueChange:q,onSend:ew,onAbort:eI})]})})]})};var ea=e.i(687712),es=e.i(913106),er=e.i(942938);let en=()=>{let{t:e}=(0,b.useTranslation)("base"),a=(0,N.useLogEvent)(),s=(0,U.useImageEditorStore)(A.prop("isOpen")),r=(0,U.useImageEditorStore)(A.prop("close")),n=(0,i.useChatPageStore)(A.prop("conversationId")),[l,o]=(0,v.useState)(void 0),{handleEditorOpen:d,consumeEditorTimeMs:c,editorOpenTime:u}=(0,M.useImageEditingMetrics)();return(0,v.useEffect)(()=>{s&&void 0===u?d():s||void 0===u||a("image_editor_close",void 0,{timeInEditorMs:String(c()),location:"image-editor-dialog"})},[s,d,c,a,u]),(0,v.useEffect)(()=>{n!==l&&(l&&r(),o(n))},[n,r,l]),(0,t.jsx)(es.Dialog,{open:s,onOpenChange:e=>{e||r()},children:(0,t.jsxs)(ea.DialogPortal,{children:[(0,t.jsx)(es.DialogOverlay,{className:"fixed inset-0 z-50 bg-overlay duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,t.jsxs)(es.DialogContent,{"aria-describedby":e("image-editor.title","Image editor"),className:(0,j.cn)("fixed z-50 inset-0 bg-background duration-200 focus:outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-2 lg:p-6"),onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,t.jsx)(er.VisuallyHidden,{children:(0,t.jsx)(ea.DialogTitle,{children:e("image-editor.title","Image editor")})}),(0,t.jsx)(ei,{})]})]})})}},295451,e=>{"use strict";e.s(["useCollectionsStore",()=>s]);var t=e.i(868275),i=e.i(564448);let a={collectionIdsByConversationId:{}},s=(0,i.createStore)(class{constructor(e,s){(0,t._)(this,"set",void 0),(0,t._)(this,"get",void 0),(0,t._)(this,"collectionIdsByConversationId",void 0),(0,t._)(this,"setCollectionIds",void 0),(0,t._)(this,"toggleCollectionId",void 0),(0,t._)(this,"getCollectionIds",void 0),(0,t._)(this,"removeCollectionIds",void 0),(0,t._)(this,"clear",void 0),this.set=e,this.get=s,this.collectionIdsByConversationId=a.collectionIdsByConversationId,this.setCollectionIds=(e,t)=>{(0,i.idsert)(this.set,"collectionIdsByConversationId")(e,t)},this.toggleCollectionId=(e,t)=>{let i=this.getCollectionIds(t),a=i.includes(e)?i.filter(t=>t!==e):[...i,e];this.setCollectionIds(a,t)},this.getCollectionIds=e=>this.get().collectionIdsByConversationId[e]||[],this.removeCollectionIds=e=>{(0,i.remove)(this.set,"collectionIdsByConversationId")(e)},this.clear=()=>{this.set(a)}}},"useCollectionsStore")}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="26d30fac-e0df-5efd-bd09-f7df4dfbccd7")}catch(e){}}();
//# debugId=26d30fac-e0df-5efd-bd09-f7df4dfbccd7
